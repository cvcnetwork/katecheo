{
    "apiVersion":"machinelearning.seldon.io/v1alpha2",
    "kind":"SeldonDeployment",
    "metadata":{
        "labels":{
            "app":"seldon"
        },
        "name":"katecheo"
    },
    "spec":{
        "annotations":{
            "project_name":"Katecheo",
            "deployment_version":"v0.2.0",
            "seldon.io/rest-read-timeout":"100000",
            "seldon.io/rest-connection-timeout":"100000",
            "seldon.io/grpc-read-timeout":"100000"
        },
        "name":"katecheo",
        "oauth_key":"oauth-key",
        "oauth_secret":"oauth-secret",
        "predictors":[
            {
                "componentSpecs":[
                    {
                        "spec":{
                            "containers":[
                                {
                                    "name":"question-detector",
                                    "image":"cvdigital/question-detector:v0.2.0",
                                    "imagePullPolicy":"IfNotPresent"
                                },
                                {
                                    "name":"kb-search",
                                    "image":"cvdigital/kb-search:v0.2.0",
                                    "imagePullPolicy":"IfNotPresent",
                                    "env":[
                                        {
                                            "name":"KATECHEO_KB",
                                            "value":"KB_SUB"
                                        },
                                        {
                                            "name":"KATECHEO_ARTICLE_ID",
                                            "value":"ARTICLE_ID_SUB"
                                        },
                                        {
                                            "name":"KATECHEO_ARTICLE_TITLE_KEY",
                                            "value":"ARTICLE_TITLE_SUB"
                                        },
                                        {
                                            "name":"KATECHEO_ARTICLE_BODY_KEY",
                                            "value":"ARTICLE_BODY_SUB"
                                        },
                                        {
                                            "name":"KATECHEO_COSINE_SIMILARITY_THRESHOLD",
                                            "value":"COSINE_SIMILARITY_THRESHOLD_SUB"
                                        }
                                    ]
                                },
                                {
                                    "name":"comprehension",
                                    "image":"cvdigital/comprehension:v0.2.0",
                                    "imagePullPolicy":"IfNotPresent",
                                    "env":[
                                        {
                                            "name":"KATECHEO_COMP_MODEL",
                                            "value":"COMPREHENSION_MODEL_SUB"
                                        }
                                    ],
                                    "resources":{
                                        "requests":{
                                            "memory":"200Mi"
                                        }
                                    }
                                }
                            ],
                            "terminationGracePeriodSeconds":20
                        }
                    }
                ],
                "graph":{
                    "children":[
                        {
                            "name":"kb-search",
                            "endpoint":{
                                "type":"REST"
                            },
                            "type":"MODEL",
                            "children":[
                                {
                                    "name":"comprehension",
                                    "endpoint":{
                                        "type":"REST"
                                    },
                                    "type":"MODEL",
                                    "children":[]
                                }
                            ]
                        }
                    ],
                    "name":"question-detector",
                    "endpoint":{
                        "type":"REST"
                    },
                    "type":"MODEL"
                },
                "name":"qna",
                "replicas":1,
                "annotations":{
                    "predictor_version":"v1"
                }
            }
        ]
    }
}
